{"ast":null,"code":"import { LOAD_ITEMS, REMOVE_ITEM, ADD_ITEM } from './items';\nconst LOAD = 'pokemon/LOAD';\nconst LOAD_TYPES = 'pokemon/LOAD_TYPES';\nconst ADD_ONE = 'pokemon/ADD_ONE';\n\nconst load = list => ({\n  type: LOAD,\n  list\n});\n\nconst loadTypes = types => ({\n  type: LOAD_TYPES,\n  types\n});\n\nconst addOnePokemon = pokemon => ({\n  type: ADD_ONE,\n  pokemon\n});\n\nexport const getPokemon = () => async dispatch => {\n  const response = await fetch(`/api/pokemon`);\n\n  if (response.ok) {\n    const list = await response.json();\n    dispatch(load(list));\n  }\n};\nexport const getPokemonTypes = () => async dispatch => {\n  const response = await fetch(`/api/pokemon/types`);\n\n  if (response.ok) {\n    const types = await response.json();\n    dispatch(loadTypes(types));\n  }\n};\nexport const getPokemonDetails = id => async dispatch => {\n  const response = await fetch(`/api/pokemon/${id}`);\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n  }\n};\nexport const createNewPokemon = payload => async dispatch => {\n  const response = await fetch(`/api/pokemon`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  });\n};\nexport const editPokemon = payload => async dispatch => {\n  const response = await fetch(`/api/pokemon/${payload.pokemon.id}`, {\n    method: 'PUT'\n  });\n};\nconst initialState = {\n  list: [],\n  types: []\n};\n\nconst sortList = list => {\n  return list.sort((pokemonA, pokemonB) => {\n    return pokemonA.no - pokemonB.no;\n  }).map(pokemon => pokemon.id);\n};\n\nconst pokemonReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD:\n      const allPokemon = {};\n      action.list.forEach(pokemon => {\n        allPokemon[pokemon.id] = pokemon;\n      });\n      return { ...allPokemon,\n        ...state,\n        list: sortList(action.list)\n      };\n\n    case LOAD_TYPES:\n      return { ...state,\n        types: action.types\n      };\n\n    case ADD_ONE:\n      if (!state[action.pokemon.id]) {\n        const newState = { ...state,\n          [action.pokemon.id]: action.pokemon\n        };\n        const pokemonList = newState.list.map(id => newState[id]);\n        pokemonList.push(action.pokemon);\n        newState.list = sortList(pokemonList);\n        return newState;\n      }\n\n      return { ...state,\n        [action.pokemon.id]: { ...state[action.pokemon.id],\n          ...action.pokemon\n        }\n      };\n\n    case LOAD_ITEMS:\n      return { ...state,\n        [action.pokemonId]: { ...state[action.pokemonId],\n          items: action.items.map(item => item.id)\n        }\n      };\n\n    case REMOVE_ITEM:\n      return { ...state,\n        [action.pokemonId]: { ...state[action.pokemonId],\n          items: state[action.pokemonId].items.filter(itemId => itemId !== action.itemId)\n        }\n      };\n\n    case ADD_ITEM:\n      console.log(action.item);\n      return { ...state,\n        [action.item.pokemonId]: { ...state[action.item.pokemonId],\n          items: [...state[action.item.pokemonId].items, action.item.id]\n        }\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default pokemonReducer;","map":{"version":3,"sources":["/home/dvwhite/aa/practice-for-week-15-react-thunk-pokedex-long-practice/frontend/src/store/pokemon.js"],"names":["LOAD_ITEMS","REMOVE_ITEM","ADD_ITEM","LOAD","LOAD_TYPES","ADD_ONE","load","list","type","loadTypes","types","addOnePokemon","pokemon","getPokemon","dispatch","response","fetch","ok","json","getPokemonTypes","getPokemonDetails","id","createNewPokemon","payload","method","headers","body","JSON","stringify","editPokemon","initialState","sortList","sort","pokemonA","pokemonB","no","map","pokemonReducer","state","action","allPokemon","forEach","newState","pokemonList","push","pokemonId","items","item","filter","itemId","console","log"],"mappings":"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","sourcesContent":["import { LOAD_ITEMS, REMOVE_ITEM, ADD_ITEM } from './items';\n\nconst LOAD = 'pokemon/LOAD';\nconst LOAD_TYPES = 'pokemon/LOAD_TYPES';\nconst ADD_ONE = 'pokemon/ADD_ONE';\n\nconst load = list => ({\n  type: LOAD,\n  list\n});\n\nconst loadTypes = types => ({\n  type: LOAD_TYPES,\n  types\n});\n\nconst addOnePokemon = pokemon => ({\n  type: ADD_ONE,\n  pokemon\n});\n\nexport const getPokemon = () => async dispatch => {\n  const response = await fetch(`/api/pokemon`);\n\n  if (response.ok) {\n    const list = await response.json();\n    dispatch(load(list));\n  }\n};\n\nexport const getPokemonTypes = () => async dispatch => {\n  const response = await fetch(`/api/pokemon/types`);\n\n  if (response.ok) {\n    const types = await response.json();\n    dispatch(loadTypes(types));\n  }\n};\n\nexport const getPokemonDetails = (id) => async dispatch => {\n  const response = await fetch(`/api/pokemon/${id}`);\n\n  if (response.ok) {\n    const pokemon = await response.json();\n    dispatch(addOnePokemon(pokemon));\n  }\n};\n\nexport const createNewPokemon = (payload) => async dispatch => {\n  const response = await fetch(`/api/pokemon`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  });\n};\n\nexport const editPokemon = (payload) => async dispatch => {\n  const response = await fetch(`/api/pokemon/${payload.pokemon.id}`, {\n    method: 'PUT'\n  })\n}\n\nconst initialState = {\n  list: [],\n  types: []\n};\n\nconst sortList = (list) => {\n  return list.sort((pokemonA, pokemonB) => {\n    return pokemonA.no - pokemonB.no;\n  }).map((pokemon) => pokemon.id);\n};\n\nconst pokemonReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD:\n      const allPokemon = {};\n      action.list.forEach(pokemon => {\n        allPokemon[pokemon.id] = pokemon;\n      });\n      return {\n        ...allPokemon,\n        ...state,\n        list: sortList(action.list)\n      };\n    case LOAD_TYPES:\n      return {\n        ...state,\n        types: action.types\n      };\n    case ADD_ONE:\n      if (!state[action.pokemon.id]) {\n        const newState = {\n          ...state,\n          [action.pokemon.id]: action.pokemon\n        };\n        const pokemonList = newState.list.map(id => newState[id]);\n        pokemonList.push(action.pokemon);\n        newState.list = sortList(pokemonList);\n        return newState;\n      }\n      return {\n        ...state,\n        [action.pokemon.id]: {\n          ...state[action.pokemon.id],\n          ...action.pokemon\n        }\n      };\n    case LOAD_ITEMS:\n      return {\n        ...state,\n        [action.pokemonId]: {\n          ...state[action.pokemonId],\n          items: action.items.map(item => item.id)\n        }\n      };\n    case REMOVE_ITEM:\n      return {\n        ...state,\n        [action.pokemonId]: {\n          ...state[action.pokemonId],\n          items: state[action.pokemonId].items.filter(\n            (itemId) => itemId !== action.itemId\n          )\n        }\n      };\n    case ADD_ITEM:\n      console.log(action.item);\n      return {\n        ...state,\n        [action.item.pokemonId]: {\n          ...state[action.item.pokemonId],\n          items: [...state[action.item.pokemonId].items, action.item.id]\n        }\n      };\n    default:\n      return state;\n  }\n}\n\nexport default pokemonReducer;\n"]},"metadata":{},"sourceType":"module"}