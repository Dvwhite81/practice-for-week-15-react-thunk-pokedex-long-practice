{"ast":null,"code":"export const LOAD_ITEMS = \"items/LOAD_ITEMS\";\nexport const UPDATE_ITEM = \"items/UPDATE_ITEM\";\nexport const REMOVE_ITEM = \"items/REMOVE_ITEM\";\nexport const ADD_ITEM = \"items/ADD_ITEM\";\n\nconst load = (items, pokemonId) => ({\n  type: LOAD_ITEMS,\n  items,\n  pokemonId\n});\n\nconst update = item => ({\n  type: UPDATE_ITEM,\n  item\n});\n\nconst add = item => ({\n  type: ADD_ITEM,\n  item\n});\n\nconst remove = (itemId, pokemonId) => ({\n  type: REMOVE_ITEM,\n  itemId,\n  pokemonId\n});\n\nexport const getItems = pokemonId => async dispatch => {\n  const response = await fetch(`/api/pokemon/${pokemonId}/items`);\n\n  if (response.ok) {\n    const items = await response.json();\n    dispatch(load(items, pokemonId));\n    return items;\n  }\n};\nexport const editItem = payload => async dispatch => {\n  const response = await fetch(`/api/items/${payload.id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n};\nconst initialState = {};\n\nconst itemsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_ITEMS:\n      const newItems = {};\n      action.items.forEach(item => {\n        newItems[item.id] = item;\n      });\n      return { ...state,\n        ...newItems\n      };\n\n    case REMOVE_ITEM:\n      const newState = { ...state\n      };\n      delete newState[action.itemId];\n      return newState;\n\n    case ADD_ITEM:\n    case UPDATE_ITEM:\n      return { ...state,\n        [action.item.id]: action.item\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default itemsReducer;","map":{"version":3,"sources":["/home/dvwhite/aa/practice-for-week-15-react-thunk-pokedex-long-practice/frontend/src/store/items.js"],"names":["LOAD_ITEMS","UPDATE_ITEM","REMOVE_ITEM","ADD_ITEM","load","items","pokemonId","type","update","item","add","remove","itemId","getItems","dispatch","response","fetch","ok","json","editItem","payload","id","method","headers","initialState","itemsReducer","state","action","newItems","forEach","newState"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG,kBAAnB;AACP,OAAO,MAAMC,WAAW,GAAG,mBAApB;AACP,OAAO,MAAMC,WAAW,GAAG,mBAApB;AACP,OAAO,MAAMC,QAAQ,GAAG,gBAAjB;;AAEP,MAAMC,IAAI,GAAG,CAACC,KAAD,EAAQC,SAAR,MAAuB;AAClCC,EAAAA,IAAI,EAAEP,UAD4B;AAElCK,EAAAA,KAFkC;AAGlCC,EAAAA;AAHkC,CAAvB,CAAb;;AAMA,MAAME,MAAM,GAAIC,IAAD,KAAW;AACxBF,EAAAA,IAAI,EAAEN,WADkB;AAExBQ,EAAAA;AAFwB,CAAX,CAAf;;AAKA,MAAMC,GAAG,GAAID,IAAD,KAAW;AACrBF,EAAAA,IAAI,EAAEJ,QADe;AAErBM,EAAAA;AAFqB,CAAX,CAAZ;;AAKA,MAAME,MAAM,GAAG,CAACC,MAAD,EAASN,SAAT,MAAwB;AACrCC,EAAAA,IAAI,EAAEL,WAD+B;AAErCU,EAAAA,MAFqC;AAGrCN,EAAAA;AAHqC,CAAxB,CAAf;;AAMA,OAAO,MAAMO,QAAQ,GAAIP,SAAD,IAAe,MAAMQ,QAAN,IAAkB;AACvD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,gBAAeV,SAAU,QAA3B,CAA5B;;AAEA,MAAIS,QAAQ,CAACE,EAAb,EAAiB;AACf,UAAMZ,KAAK,GAAG,MAAMU,QAAQ,CAACG,IAAT,EAApB;AACAJ,IAAAA,QAAQ,CAACV,IAAI,CAACC,KAAD,EAAQC,SAAR,CAAL,CAAR;AACA,WAAOD,KAAP;AACD;AACF,CARM;AAUP,OAAO,MAAMc,QAAQ,GAAIC,OAAD,IAAa,MAAMN,QAAN,IAAkB;AACrD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,cAAaI,OAAO,CAACC,EAAG,EAA1B,EAA6B;AACvDC,IAAAA,MAAM,EAAE,KAD+C;AAEvDC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AAF8C,GAA7B,CAA5B;AAMD,CAPM;AASP,MAAMC,YAAY,GAAG,EAArB;;AAEA,MAAMC,YAAY,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AACrD,UAAQA,MAAM,CAACpB,IAAf;AACE,SAAKP,UAAL;AACE,YAAM4B,QAAQ,GAAG,EAAjB;AACAD,MAAAA,MAAM,CAACtB,KAAP,CAAawB,OAAb,CAAqBpB,IAAI,IAAI;AAC3BmB,QAAAA,QAAQ,CAACnB,IAAI,CAACY,EAAN,CAAR,GAAoBZ,IAApB;AACD,OAFD;AAGA,aAAO,EACL,GAAGiB,KADE;AAEL,WAAGE;AAFE,OAAP;;AAIF,SAAK1B,WAAL;AACE,YAAM4B,QAAQ,GAAG,EAAE,GAAGJ;AAAL,OAAjB;AACA,aAAOI,QAAQ,CAACH,MAAM,CAACf,MAAR,CAAf;AACA,aAAOkB,QAAP;;AACF,SAAK3B,QAAL;AACA,SAAKF,WAAL;AACE,aAAO,EACL,GAAGyB,KADE;AAEL,SAACC,MAAM,CAAClB,IAAP,CAAYY,EAAb,GAAkBM,MAAM,CAAClB;AAFpB,OAAP;;AAIF;AACE,aAAOiB,KAAP;AArBJ;AAuBD,CAxBD;;AA0BA,eAAeD,YAAf","sourcesContent":["export const LOAD_ITEMS = \"items/LOAD_ITEMS\";\nexport const UPDATE_ITEM = \"items/UPDATE_ITEM\";\nexport const REMOVE_ITEM = \"items/REMOVE_ITEM\";\nexport const ADD_ITEM = \"items/ADD_ITEM\";\n\nconst load = (items, pokemonId) => ({\n  type: LOAD_ITEMS,\n  items,\n  pokemonId\n});\n\nconst update = (item) => ({\n  type: UPDATE_ITEM,\n  item\n});\n\nconst add = (item) => ({\n  type: ADD_ITEM,\n  item\n});\n\nconst remove = (itemId, pokemonId) => ({\n  type: REMOVE_ITEM,\n  itemId,\n  pokemonId\n});\n\nexport const getItems = (pokemonId) => async dispatch => {\n  const response = await fetch(`/api/pokemon/${pokemonId}/items`);\n\n  if (response.ok) {\n    const items = await response.json();\n    dispatch(load(items, pokemonId));\n    return items;\n  }\n};\n\nexport const editItem = (payload) => async dispatch => {\n  const response = await fetch(`/api/items/${payload.id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n}\n\nconst initialState = {};\n\nconst itemsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_ITEMS:\n      const newItems = {};\n      action.items.forEach(item => {\n        newItems[item.id] = item;\n      })\n      return {\n        ...state,\n        ...newItems\n      }\n    case REMOVE_ITEM:\n      const newState = { ...state };\n      delete newState[action.itemId];\n      return newState;\n    case ADD_ITEM:\n    case UPDATE_ITEM:\n      return {\n        ...state,\n        [action.item.id]: action.item\n      };\n    default:\n      return state;\n  }\n};\n\nexport default itemsReducer;\n"]},"metadata":{},"sourceType":"module"}